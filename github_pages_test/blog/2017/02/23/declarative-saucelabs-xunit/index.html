<!DOCTYPE html>
<html lang="en">
<head>
<title>
Browser testing and conditional logic in Declarative Pipeline
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/sites/default/files/jenkins_favicon.ico" rel="shortcut icon" type="image/x-icon">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/img/favicon.ico" rel="icon" sizes="32x32" type="img/png">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/img/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/img/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/img/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/img/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/img/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152">
<meta content="Browser testing and conditional logic in Declarative Pipeline" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Browser testing and conditional logic in Declarative Pipeline" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Browser testing and conditional logic in Declarative Pipeline" property="og:title">
<meta content="article" property="og:type">
<meta content="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/blog/2017/02/23/declarative-saucelabs-xunit/index.html" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Browser testing and conditional logic in Declarative Pipeline" property="og:site_name">
<meta content="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/images/logo-title-opengraph.png" name="og:image">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/assets/bower/tether/css/tether.min.css" media="screen" rel="stylesheet">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/css/font-icons.css" media="screen" rel="stylesheet">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/css/jenkins.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/assets/bower/ionicons/css/ionicons.min.css" media="screen" rel="stylesheet">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/css/footer.css" media="screen" rel="stylesheet">
<link href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/css/font-awesome.min.css" media="screen" rel="stylesheet">
</head>
<body>
<script src="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<nav class="navbar navbar-expand-md navbar-dark top bg-dark fixed-top" id="ji-toolbar">
<a class="navbar-brand" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test">
Jenkins
</a>
<button class="navbar-toggler" data-target="#CollapsingNavbar" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="CollapsingNavbar">
<ul class="nav navbar-nav ml-auto">
<li class="nav-item">
<a class="nav-link" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/node">
Blog
</a>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
Documentation
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/doc">
Use Jenkins
</a>
<a class="dropdown-item" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/doc/developer">
Extend Jenkins
</a>
<span class="dropdown-item">
<strong>
Use-cases
</strong>
</span>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/android">
&nbsp;-&nbsp;Android
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/c">
&nbsp;-&nbsp;C/C++
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/docker">
&nbsp;-&nbsp;Docker
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/embedded">
&nbsp;-&nbsp;Embedded
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/github">
&nbsp;-&nbsp;GitHub
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/java">
&nbsp;-&nbsp;Java
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/php">
&nbsp;-&nbsp;PHP
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/pipeline">
&nbsp;-&nbsp;Continuous Delivery
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/python">
&nbsp;-&nbsp;Python
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/ruby">
&nbsp;-&nbsp;Ruby
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link" href="https://plugins.jenkins.io/">
Plugins
</a>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
Community
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/participate">
Overview
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/chat" title="Chat with the rest of the Jenkins community on IRC">
Chat
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/projects/jam">
Meet
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/events">
Events
</a>
<a class="dropdown-item feature" href="https://issues.jenkins-ci.org/">
Issue Tracker
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/mailing-lists" title="Browse Jenkins mailing list archives and/or subscribe to lists">
Mailing Lists
</a>
<a class="dropdown-item feature" href="https://wiki.jenkins.io/">
Wiki
</a>
<a class="dropdown-item feature" href="https://accounts.jenkins.io/" title="Create/manage your account for accessing wiki, issue tracker, etc">
Account Management
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/sigs/">
<strong>
Special Interest Groups
</strong>
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/sigs/advocacy-and-outreach/">
&nbsp;-&nbsp;Advocacy and Outreach
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/sigs/chinese-localization/">
&nbsp;-&nbsp;Chinese Localization
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/sigs/cloud-native/">
&nbsp;-&nbsp;Cloud Native
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/sigs/docs/">
&nbsp;-&nbsp;Documentation
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/sigs/gsoc/">
&nbsp;-&nbsp;Google Summer of Code
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/sigs/hw-and-eda/">
&nbsp;-&nbsp;Hardware and EDA
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/sigs/pipeline-authoring/">
&nbsp;-&nbsp;Pipeline Authoring
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/sigs/platform/">
&nbsp;-&nbsp;Platform
</a>
</div>
</li>
<li class="dropdown nav-item">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
Subprojects
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/projects/">
Overview
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/projects/blueocean/">
Blue Ocean
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/projects/evergreen/">
Evergreen
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/projects/gsoc/">
Google Summer of Code in Jenkins
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/projects/infrastructure/">
Infrastructure
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/projects/jam/">
Jenkins Area Meetups
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/projects/jcasc/">
Jenkins Configuration as Code
</a>
<a class="dropdown-item feature" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/projects/remoting/">
Jenkins Remoting
</a>
</div>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
About
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/security">
Security
</a>
<a class="dropdown-item" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/press">
Press
</a>
<a class="dropdown-item" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/awards">
Awards
</a>
<a class="dropdown-item" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/project/conduct">
Conduct
</a>
<a class="dropdown-item" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/artwork">
Artwork
</a>
</div>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
English
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/zh">
中文 Chinese
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link btn btn-outline-secondary" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/download">
Download
</a>
</li>
</ul>
</div>
</nav>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<script>
  $(function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('#content h' + i);
    }
  })
</script>
<div class="container blog-post">
<div class="row body">
<div class="col-md-11 col-md-offset-1 main-content" id="content">
<div id="content-top">
<h1>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/blog/2017/02/23/declarative-saucelabs-xunit/" title="Browser testing and conditional logic in Declarative Pipeline">
Browser testing and conditional logic in Declarative Pipeline
</a>
</h1>
<div style="float: right; clear: all;">
<a class="twitter-share-button" data-lang="en" href="https://twitter.com/share">
Tweet
</a>
</div>
<div class="post-attrs">
<span class="submitted">
Published on
2017-02-23
by
<a href="/blog/authors/lnewman">Liam Newman</a>
</span>
<ul class="list-inline tags">
<li>
<a class="tag-link" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/node/tags/pipeline">
pipeline
</a>
</li>
<li>
<a class="tag-link" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/node/tags/plugins">
plugins
</a>
</li>
<li>
<a class="tag-link" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/node/tags/xunit">
xunit
</a>
</li>
<li>
<a class="tag-link" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/node/tags/nightwatch">
nightwatch
</a>
</li>
<li>
<a class="tag-link" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/node/tags/saucelabs">
saucelabs
</a>
</li>
<li>
<a class="tag-link" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/node/tags/selenium">
selenium
</a>
</li>
<li>
<a class="tag-link" href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/node/tags/declarative">
declarative
</a>
</li>
</ul>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is a guest post by <a href="https://github.com/bitwiseman">Liam Newman</a>,
Technical Evangelist at <a href="https://cloudbees.com">CloudBees</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Declare Your Pipelines!</strong>
<a href="/blog/2017/02/03/declarative-pipeline-ga/">Declarative Pipeline 1.0 is here</a>!
This is the fourth post in a series showing some of the cool features of
<a href="/doc/book/pipeline/syntax/#declarative-pipeline">Declarative Pipeline</a>.</p>
</div>
<div class="paragraph">
<p>In the
<a href="/blog/2017/02/15/declarative-notifications/">previous post</a>,
we integrated several notification services into a Declarative Pipeline.
We kept our Pipeline clean and easy to understand
by using a shared library to make a custom step called <code>sendNotifications</code>
that we called at the start and end of our Pipeline.</p>
</div>
<div class="paragraph">
<p>In this blog post, we&#8217;ll start by translating the Scripted Pipeline in the sample project I worked with
in
"<a href="/blog/2016/08/29/sauce-pipeline/">Browser-testing with Sauce OnDemand and Pipeline</a>"
and
"<a href="/blog/2016/10/31/xunit-reporting/">xUnit and Pipeline</a>"
to Declarative.
We&#8217;ll make our Pipeline clearer by adding an <code>environment</code> directive
to define some environment variables, and then moving some code to a shared library.
Finally, we&#8217;ll look at using the <code>when</code> directive to add simple conditional behavior to our Pipeline.</p>
</div>
<div class="sect1">
<h2 id="setup"><a class="anchor" href="#setup"></a>Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The setup for this post uses the same repository as the two posts above,
<a href="https://github.com/bitwiseman/JS-Nightwatch.js">my fork</a>
of the
<a href="https://github.com/saucelabs-sample-test-frameworks/JS-Nightwatch.js">JS-Nightwatch.js sample project</a>.
I&#8217;ve once again created a branch specifically for this blog post,
this time called
<a href="https://github.com/bitwiseman/JS-Nightwatch.js/tree/blog/declarative/sauce"><code>blog/declarative/sauce</code></a>.</p>
</div>
<div class="paragraph">
<p>Like the two posts above, this Pipeline will use the
<a href="https://plugins.jenkins.io/xunit">xUnit</a> and
<a href="https://plugins.jenkins.io/sauce-ondemand">Sauce OnDemand</a> plugins.
The xUnit plugin only needs to be installed, the Sauce OnDemand needs additional configuration.
Follow
<a href="https://wiki.saucelabs.com/display/DOCS/Installing+and+Configuring+the+Sauce+OnDemand+Plugin+for+Jenkins">Sauce Labs' configuration instructions</a>
to create an account with Sauce Labs and add your Sauce Labs credentials to Jenkins.
The Sauce OnDemand plugin will automatically install
<a href="https://wiki.saucelabs.com/display/DOCS/Sauce+Connect+Proxy">Sauce Connect</a>
for us when we call it from our Pipeline.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Be sure to you have the latest version of the
<a href="https://plugins.jenkins.io/sauce-ondemand">Sauce OnDemand</a> plugin (1.160 or newer).
It has several fixes required for this post.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For a shared library, I&#8217;ve still got the one from the
<a href="/blog/2017/02/15/declarative-notifications/">previous post</a>.
To set up this "Global Pipeline Library," navigate to "Manage Jenkins" &#8594; "Configure System"
in the Jenkins web UI.
Once there, under "Global Pipeline Libraries", add a new library.
Then set the name to <code>bitwiseman-shared</code>, point it at my repository,
and set the default branch for the library to <code>master</code>.</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="/images/post-images/2017-02-15/shared-library.png" alt="Global Pipeline Library" width="800">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reducing-complexity-with-declarative"><a class="anchor" href="#reducing-complexity-with-declarative"></a>Reducing Complexity with Declarative</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you&#8217;ve been following along through this series,
this first step will be quite familiar by now.
We&#8217;ll start from the Pipeline we had at the end of the xUnit post
and translate it to Declarative.</p>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">pipeline {
    agent any
    options {
        <span style="color:#777">// Nightwatch.js supports color ouput, so wrap add his option</span>
        ansiColor <span style="color:#606">colorMapName</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">XTerm</span><span style="color:#710">'</span></span>
    }
    stages {
        stage (<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Build</span><span style="color:#710">&quot;</span></span>) {
            steps {
                <span style="color:#777">// Install dependencies</span>
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">npm install</span><span style="color:#710">'</span></span>
            }
        }
        stage (<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Test</span><span style="color:#710">&quot;</span></span>) {
            steps {
                <span style="color:#777">// Add sauce credentials</span>
                sauce(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">f0a6b8ad-ce30-4cba-bf9a-95afbc470a8a</span><span style="color:#710">'</span></span>) {
                    <span style="color:#777">// Start sauce connect</span>
                    sauceconnect() {
                        <span style="color:#777">// Run selenium tests using Nightwatch.js</span>
                        <span style="color:#777">// Ignore error codes. The junit publisher will cover setting build status.</span>
                        sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./node_modules/.bin/nightwatch -e chrome,firefox,ie,edge --test tests/guineaPig.js || true</span><span style="color:#710">&quot;</span></span>
                    }
                }
            }
            post {
                always {
                    step([<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">XUnitBuilder</span><span style="color:#710">'</span></span>,
                        <span style="color:#B06;font-weight:bold">thresholds</span>: [
                            [<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">SkippedThreshold</span><span style="color:#710">'</span></span>, <span style="color:#B06;font-weight:bold">failureThreshold</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">0</span><span style="color:#710">'</span></span>],
                            <span style="color:#777">// Allow for a significant number of failures</span>
                            <span style="color:#777">// Keeping this threshold so that overwhelming failures are guaranteed</span>
                            <span style="color:#777">//     to still fail the build</span>
                            [<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">FailedThreshold</span><span style="color:#710">'</span></span>, <span style="color:#B06;font-weight:bold">failureThreshold</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">10</span><span style="color:#710">'</span></span>]],
                        <span style="color:#606">tools</span>: [[<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">JUnitType</span><span style="color:#710">'</span></span>, <span style="color:#B06;font-weight:bold">pattern</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">reports/**</span><span style="color:#710">'</span></span>]]])

                    saucePublisher()
                }
            }
        }
    }</code></pre>
</div></div>  <div class="pipeline-script-expand">
    <a href="#" onclick="javascript:$(this).parent().siblings('.pipeline-script').toggle(); return false;">Toggle Scripted Pipeline</a>
    <em>(Advanced)</em>
  </div>
  <div class="listingblock pipeline-script"
        style="display: none">
    <div class="title">Jenkinsfile (Scripted Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">node {
    stage <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Build</span><span style="color:#710">&quot;</span></span>
    checkout scm

    <span style="color:#777">// Install dependencies</span>
    sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">npm install</span><span style="color:#710">'</span></span>

    stage <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Test</span><span style="color:#710">&quot;</span></span>
    <span style="color:#777">// Add sauce credentials</span>
    sauce(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">f0a6b8ad-ce30-4cba-bf9a-95afbc470a8a</span><span style="color:#710">'</span></span>) {
        <span style="color:#777">// Start sauce connect</span>
        sauceconnect() {

            <span style="color:#777">// List of browser configs we'll be testing against.</span>
            <span style="color:#080;font-weight:bold">def</span> platform_configs = [
                <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">chrome</span><span style="color:#710">'</span></span>,
                <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">firefox</span><span style="color:#710">'</span></span>,
                <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">ie</span><span style="color:#710">'</span></span>,
                <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">edge</span><span style="color:#710">'</span></span>
            ].join(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">,</span><span style="color:#710">'</span></span>)

            <span style="color:#777">// Nightwatch.js supports color ouput, so wrap this step for ansi color</span>
            wrap([<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">AnsiColorBuildWrapper</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">colorMapName</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">XTerm</span><span style="color:#710">'</span></span>]) {
                <span style="color:#777">// Run selenium tests using Nightwatch.js</span>
                <span style="color:#777">// Ignore error codes. The junit publisher will cover setting build status.</span>
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./node_modules/.bin/nightwatch -e </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>platform_configs<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> --test tests/guineaPig.js || true</span><span style="color:#710">&quot;</span></span>
            }

            step([<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">XUnitBuilder</span><span style="color:#710">'</span></span>,
                <span style="color:#B06;font-weight:bold">thresholds</span>: [
                    [<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">SkippedThreshold</span><span style="color:#710">'</span></span>, <span style="color:#B06;font-weight:bold">failureThreshold</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">0</span><span style="color:#710">'</span></span>],
                    <span style="color:#777">// Allow for a significant number of failures</span>
                    <span style="color:#777">// Keeping this threshold so that overwhelming failures are guaranteed</span>
                    <span style="color:#777">//     to still fail the build</span>
                    [<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">FailedThreshold</span><span style="color:#710">'</span></span>, <span style="color:#B06;font-weight:bold">failureThreshold</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">10</span><span style="color:#710">'</span></span>]],
                <span style="color:#606">tools</span>: [[<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">JUnitType</span><span style="color:#710">'</span></span>, <span style="color:#B06;font-weight:bold">pattern</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">reports/**</span><span style="color:#710">'</span></span>]]])

            saucePublisher()
        }
    }
}</code></pre>
</div></div></div>
<div class="imageblock center">
<div class="content">
<img src="/images/post-images/2017-02-23/blue-ocean.png" alt="Blue Ocean Run" width="800">
</div>
</div>
<div class="imageblock center">
<div class="content">
<img src="/images/post-images/2017-02-23/sauce-report.png" alt="SauceLabs Test Report" width="800">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Blue Ocean doesn&#8217;t support displaying SauceLabs test reports yet
(see <a href="https://issues.jenkins-ci.org/browse/JENKINS-42242">JENKINS-42242</a>).
To view the report above, I had to switch back to the stage view of this run.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="elevating-settings-using-environment"><a class="anchor" href="#elevating-settings-using-environment"></a>Elevating Settings using <code>environment</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each time we&#8217;ve moved a project from Scripted Pipeline to Declarative,
we&#8217;ve found the cleaner format of Declarative Pipeline highlights the less
clear parts of the existing Pipeline.
In this case, the first thing that jumps out at me is that the parameters of the
Saucelabs and Nightwatch execution are hardcoded and buried down in the middle of our Pipeline.
This is a relatively short Pipeline, so it isn&#8217;t terribly hard to find them,
but as this pipeline grows and changes it would be better if those values were kept separate.
In Scripted, we&#8217;d have defined some variables,
but Declarative doesn&#8217;t allow us to define variables in the usual Groovy sense.</p>
</div>
<div class="paragraph">
<p>The <code>environment</code> directive let&#8217;s us set some environment variables
and use them later in our pipeline.
As you&#8217;d expect, the <code>environment</code> directive is just a set of name-value pairs.
Environment variables are accessible in Pipeline via <code>env.variableName</code> (or just <code>variableName</code>)
and in shell scripts as standard environment variables, typically <code>$variableName</code>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s move the list of browsers, the test filter, and the sauce credential string to environment variables.</p>
</div>
<div class="listingblock">
<div class="title">Jenkinsfile</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">    environment {
        saucelabsCredentialId = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">f0a6b8ad-ce30-4cba-bf9a-95afbc470a8a</span><span style="color:#710">'</span></span>
        sauceTestFilter = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">tests/guineaPig.js</span><span style="color:#710">'</span></span>
        platformConfigs = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">chrome,firefox,ie,edge</span><span style="color:#710">'</span></span>
    }
    stages {
        <span style="color:#777">/* ... unchanged ... */</span>
        stage (<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Test</span><span style="color:#710">&quot;</span></span>) {
            steps {
                <span style="color:#777">// Add sauce credentials</span>
                sauce(saucelabsCredentialId) {
                    <span style="color:#777">// Start sauce connect</span>
                    sauceconnect() {
                        <span style="color:#777">// Run selenium tests using Nightwatch.js</span>
                        <span style="color:#777">// Ignore error codes. The junit publisher will cover setting build status.</span>
                        sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./node_modules/.bin/nightwatch -e </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>env.platformConfigs<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> --test </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>env.sauceTestFilter<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> || true</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
                    }
                }
            }
            post { <span style="color:#777">/* ... unchanged ... */</span> }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This double-quoted string causes Groovy to replace the variables with their
literal values before passing to <code>sh</code>.
This could also be written using singe-quotes:
<code>sh './node_modules/.bin/nightwatch -e $platformConfigs --test $sauceTestFilter || true'</code>.
With a single quoted string, the string is passed as written to the shell,
and then <strong>the shell</strong> does the variable substitution.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="moving-complex-code-to-shared-libraries"><a class="anchor" href="#moving-complex-code-to-shared-libraries"></a>Moving Complex Code to Shared Libraries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that we have settings separated from the code, we can do some code clean up.
Unlike the previous post, we don&#8217;t have any repeating code,
but we do have some distractions.
The nesting of <code>sauce</code>, <code>sauceconnect</code>, and <code>sh nightwatch</code> seems excessive,
and that xUnit <code>step</code> is a bit ugly as well.
Let&#8217;s move those into our shared library as custom steps with parameters.
We&#8217;ll change the <code>Jenkinsfile</code> in our main project,
and add the custom steps to a branch named
<code>blog/declarative/sauce</code> in our library repository.</p>
</div>
<div class="listingblock">
<div class="title">Jenkinsfile</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span style="color:#007">@Library</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">bitwiseman-shared@blog/declarative/sauce</span><span style="color:#710">'</span></span>) _

<span style="color:#777">/* ... unchanged ... */</span>

stage (<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Test</span><span style="color:#710">&quot;</span></span>) {
    steps {
        sauceNightwatch saucelabsCredentialId,
            platformConfigs,
            sauceTestFilter
    }
    post {
        always {
            xUnitPublishResults <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">reports/**</span><span style="color:#710">'</span></span>,
                <span style="color:#777">/* failWhenSkippedExceeds */</span> <span style="color:#00D">0</span>,
                <span style="color:#777">/* failWhenFailedExceeds */</span> <span style="color:#00D">10</span>

            saucePublisher()
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">vars/sauceNightwatch.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">call</span>(<span style="color:#0a8;font-weight:bold">String</span> sauceCredential, <span style="color:#0a8;font-weight:bold">String</span> platforms = <span style="color:#069">null</span>, <span style="color:#0a8;font-weight:bold">String</span> testFilter = <span style="color:#069">null</span>) {
    platforms = platforms ? <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">-e '</span><span style="color:#710">&quot;</span></span> + platforms + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">'</span><span style="color:#710">&quot;</span></span> : <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#710">'</span></span>
    testFilter = testFilter ? <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">--test '</span><span style="color:#710">&quot;</span></span> + testFilter + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">'</span><span style="color:#710">&quot;</span></span> : <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#710">'</span></span>

    <span style="color:#777">// Add sauce credentials</span>
    sauce(sauceCredential) {
        <span style="color:#777">// Start sauce connect</span>
        sauceconnect() {
            <span style="color:#777">// Run selenium tests using Nightwatch.js</span>
            <span style="color:#777">// Ignore error codes. The junit publisher will cover setting build status.</span>
            sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./node_modules/.bin/nightwatch </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>platforms<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>testFilter<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> || true</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In this form, this could not be written using a literal single-quoted string.
Here, <code>platforms</code> and <code>testFilter</code> are groovy variables, not environment variables.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">vars/xUnitPublishResults.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">call</span>(<span style="color:#0a8;font-weight:bold">String</span> pattern, <span style="color:#0a8;font-weight:bold">Integer</span> failWhenSkippedExceeds,
        <span style="color:#0a8;font-weight:bold">Integer</span> failWhenFailedExceeds) {
    step([<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">XUnitBuilder</span><span style="color:#710">'</span></span>,
        <span style="color:#B06;font-weight:bold">thresholds</span>: [
            [<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">SkippedThreshold</span><span style="color:#710">'</span></span>, <span style="color:#B06;font-weight:bold">failureThreshold</span>: failWhenSkippedExceeds.toString()],
            <span style="color:#777">// Allow for a significant number of failures</span>
            <span style="color:#777">// Keeping this threshold so that overwhelming failures are guaranteed</span>
            <span style="color:#777">//     to still fail the build</span>
            [<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">FailedThreshold</span><span style="color:#710">'</span></span>, <span style="color:#B06;font-weight:bold">failureThreshold</span>: failWhenFailedExceeds.toString()]],
        <span style="color:#606">tools</span>: [[<span style="color:#F00;background-color:#FAA">$</span><span style="color:#339;font-weight:bold">class</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">JUnitType</span><span style="color:#710">'</span></span>, <span style="color:#B06;font-weight:bold">pattern</span>: pattern]]])
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-conditional-stages-using-when"><a class="anchor" href="#running-conditional-stages-using-when"></a>Running Conditional Stages using <code>when</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a sample web testing project.
We probably wouldn&#8217;t deploy it like we would production code,
but we might still want to deploy somewhere,
by publishing it to an artifact repository, for example.
This project is hosted on GitHub and uses feature branches and pull requests to make changes.
I&#8217;d like to use the same Pipeline for feature branches, pull requests, and the master branch,
but I only want to deploy from master.</p>
</div>
<div class="paragraph">
<p>In Scripted, we&#8217;d wrap a <code>stage</code> in an <code>if-then</code> and check if the branch for
the current run is named "master".
Declarative doesn&#8217;t support that kind of general conditional behavior.
Instead, it provides a
<a href="/doc/book/pipeline/syntax/#when"><code>when</code> directive</a>
that can be added to <code>stage</code> sections.
The <code>when</code> directive supports several types of conditions, including a <code>branch</code> condition,
where the stage will run when the branch name matches the specified pattern.
That is exactly what we need here.</p>
</div>
<div class="listingblock">
<div class="title">Jenkinsfile</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">stages {
    <span style="color:#777">/* ... unchanged ... */</span>
    stage (<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Deploy</span><span style="color:#710">'</span></span>) {
        when {
            branch <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">master</span><span style="color:#710">'</span></span>
        }
        steps {
             echo <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Placeholder for deploy steps.</span><span style="color:#710">'</span></span>
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we run our Pipeline with this new stage, we get the following outputs:</p>
</div>
<div class="listingblock">
<div class="title">Log output for 'feature/test' branch</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code>...
Finished Sauce Labs test publisher
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Deploy)
Stage 'Deploy' skipped due to when conditional
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
...</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Log output for 'master' branch</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code>...
Finished Sauce Labs test publisher
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Deploy)
[Pipeline] echo
Placeholder for deploy steps.
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I have to say, our latest Declarative Pipeline turned out extremely well.
I think someone coming from Freestyle jobs, with little to no experience with Pipeline or Groovy,
would still be able to look at this Declarative Pipeline and make sense of what it is doing.
We&#8217;ve added new functionality to our Pipeline while making it easier to understand
and maintain.</p>
</div>
<div class="paragraph">
<p>I hope you&#8217;ve learned as much as I have during this blog series.
I&#8217;m excited to see that even in the the short time since Declarative 1.0 was released,
teams are already using it in make improvements similar to what those we&#8217;ve covered in this series.
Thanks for reading!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="links"><a class="anchor" href="#links"></a>Links</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://plugins.jenkins.io/xunit">xUnit</a></p>
</li>
<li>
<p><a href="https://plugins.jenkins.io/sauce-ondemand">Sauce OnDemand</a></p>
</li>
<li>
<p><a href="https://plugins.jenkins.io/pipeline-model-definition">Declarative Pipeline plugin</a></p>
</li>
<li>
<p><a href="/doc/book/pipeline/syntax/#declarative-pipeline">Declarative Pipeline Syntax Reference</a></p>
</li>
<li>
<p><a href="https://github.com/bitwiseman/JS-Nightwatch.js/tree/blog/declarative/sauce">Pipeline source for this post</a></p>
</li>
<li>
<p><a href="https://github.com/bitwiseman/jenkins-pipeline-shared/tree/blog/declarative/sauce">Pipeline Shared Library source for this post</a></p>
</li>
</ul>
</div>
</div>
</div>
<!-- starting partial author.html.haml -->
<div id="about-the-author">
<b class="author about-header">
About the Author
</b>
<table class="author box">
<tr>
<td>
<!-- starting partial avatar.html.haml -->
<img alt="Liam Newman" class="author logo" src="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/images/avatars/lnewman.jpeg">

<!-- ending partial avatar.html.haml -->
</td>
<td>
<b class="author name">
<a href="/blog/authors/lnewman">
Liam Newman
</a>
</b>
<p>
<div class="paragraph">
<p>Liam started his software career as a tester, which might explain why he&#8217;s such a fan of CI/CD and Pipeline as Code.
He has spent the majority of his software engineering career implementing Continuous Integration systems at companies big and small.
He is a Jenkins project contributor and an expert in Jenkins Pipeline, both Scripted and Declarative.
Liam currently works as a Jenkins Evangelist at <a href="https://cloudbees.com">CloudBees</a>.
When not at work, he enjoys testing gravity by doing Aikido.</p>
</div>
</p>
<!-- starting partial social-media-buttons.html.haml -->
<ul class="author social-media-buttons">
<li class="author">
<a href="https://github.com/bitwiseman" target="_blank">
GitHub
</a>
</li>
<li class="author">
<a href="https://twitter.com/bitwiseman" target="_blank">
Twitter
</a>
</li>
</ul>

<!-- ending partial social-media-buttons.html.haml -->
</td>
</tr>
</table>
</div>

<!-- ending partial author.html.haml -->
</div>
</div>
</div>


<script src="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/assets/bower/anchor-js/anchor.min.js"></script>
<script src="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/assets/bower/tether/js/tether.min.js"></script>
<script src="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<footer id="footer">
<div class="container">
<div class="row">
<div class="col-md-4">
<p class="box">
<a href="https://github.com/jenkins-infra/jenkins.io/edit/master/content//blog/2017/02/2017-02-23-declarative-saucelabs-xunit.adoc" title="Edit /blog/2017/02/2017-02-23-declarative-saucelabs-xunit.adoc on GitHub">Improve this page</a>
|
<a href="https://github.com/jenkins-infra/jenkins.io/commits/master/content//blog/2017/02/2017-02-23-declarative-saucelabs-xunit.adoc" title="View /blog/2017/02/2017-02-23-declarative-saucelabs-xunit.adoc history on GitHub">Page history</a>
</p>
<div class="license-box">
<div id="creativecommons">
<a href="https://creativecommons.org/licenses/by-sa/4.0/">
<p>
<img alt="Creative Commons Attribution-ShareAlike license" src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
</p>
</a>
<p>
The content driving this site is licensed under the Creative
Commons Attribution-ShareAlike 4.0 license.
</p>
</div>
</div>
</div>
<div class="links col-md-8">
<div class="container">
<div class="row">
<div class="area col-md-3">
<div class="div-mar">
<h5>Resources</h5>
<ul class="resources">
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/events">
Events
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/doc">
Documentation
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/node">
Blog
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Solutions</h5>
<ul>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/android">
Android
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/c">
C/C++
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/docker">
Docker
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/embedded">
Embedded
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/github">
GitHub
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/java">
Java
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/php">
PHP
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/pipeline">
Continuous Delivery
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/python">
Python
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/solutions/ruby">
Ruby
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Project</h5>
<ul class="project">
<li>
<a href="https://issues.jenkins-ci.org">
Issue tracker
</a>
</li>
<li>
<a href="https://wiki.jenkins.io">
Wiki
</a>
</li>
<li>
<a href="https://github.com/jenkinsci">
GitHub
</a>
</li>
<li>
<a href="https://ci.jenkins.io">
Jenkins on Jenkins
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Community</h5>
<ul class="community">
<li>
<a href="https://groups.google.com/forum/#!forum/jenkinsci-users">
Users mailing list
</a>
</li>
<li>
<a href="https://groups.google.com/forum/#!forum/jenkinsci-dev">
Developers mailing list
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/sigs">
Special Interest Groups
</a>
</li>
<li>
<a href="https://twitter.com/jenkinsci">
Twitter
</a>
</li>
<li>
<a href="https://reddit.com/r/jenkinsci">
Reddit
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/merchandise">
Merchandise
</a>
</li>
<li>
<a href="https://tempora-mutantur.github.io/jenkins.io/github_pages_test/awards">
Awards
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  !function(d,s,id) {
    var js, fjs=d.getElementsByTagName(s)[0];
    if (!d.getElementById(id)) {
      js = d.createElement(s);
      js.id=id;
      js.src="//platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,"script","twitter-wjs");
  
  $(function(){
    var $body = $(document.body);
    $(".nav-link.dropdown-toggle").on("mousedown", function(){
      $body.addClass("no-outline");
    })
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
</body>
</html>
